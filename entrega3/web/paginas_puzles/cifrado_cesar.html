<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Disco César</title>
    <style>
      body {
        font-family: "Verdana", sans-serif;
        text-align: center;
        margin: 0;
        padding: 20px;
        background: radial-gradient(circle at center, #fdfcfb, #e0e0e0);
        color: #333;
      }

      h2 {
        color: #4b3e2a;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
      }

      .disco-container {
        position: relative;
        width: 360px;
        height: 360px;
        margin: 20px auto;
      }

      .disco {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 14px;
        font-weight: bold;
      }

      .exterior {
        border: 5px solid #8b5e3c;
        background: radial-gradient(circle at center, #d2b48c, #8b5e3c);
        box-shadow: inset 0 0 20px rgba(0,0,0,0.3), 0 0 10px rgba(0,0,0,0.2);
        color: #fff8dc;
        z-index: 1;
      }
      
      .interior {
        border: 4px solid #3c5a8b;
        transition: transform 0.3s ease;
        box-shadow: inset 0 0 15px rgba(0,0,0,0.3), 0 0 8px rgba(0,0,0,0.2);
        color: #f0f8ff;
        z-index: 2;
      }

      .disco div {
        position: absolute;
        width: 24px;
        text-align: center;
        text-shadow: 0 1px 2px rgba(0,0,0,0.5);
      }

      #clave-slider {
        width: 50%;
        margin-top: 20px;
        -webkit-appearance: none;
        height: 10px;
        background: #8b5e3c;
        border-radius: 5px;
        outline: none;
      }

      #clave-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 20px;
        height: 20px;
        background: #ffd700;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 0 6px rgba(0,0,0,0.5);
      }

      #clave-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #ffd700;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 0 6px rgba(0,0,0,0.5);
      }

      p {
        font-size: 1.1em;
        margin: 10px 0;
      }

      #mensaje-cifrado {
        font-weight: bold;
        font-size: 1.3em;
        color: #4b3e2a;
      }
    </style>
  </head>
  <body>
    <h2>Disco de Cifrado César</h2>
    <div class="disco-container">
      <div class="disco exterior"></div>
      <div class="disco interior" id="disco-interior"></div>
    </div>
    <input type="range" id="clave-slider" min="0" max="26" value="0" />
    <p>Clave actual: <span id="clave-valor">0</span></p>
    <p><strong>Mensaje cifrado: </strong><span id="mensaje-cifrado">Cargando...</span></p>

    <script>
      const ALFABETO = "ABCDEFGHIJKLMNÑOPQRSTUVWXYZ";

      function crearDiscoLetras(container, letras, radio) {
        const n = letras.length;
        letras.split("").forEach((letra, i) => {
          const angle = (360 / n) * i;
          const el = document.createElement("div");
          el.style.transform = `rotate(${angle}deg) translate(${radio}px) rotate(-${angle}deg)`;
          el.textContent = letra;
          container.appendChild(el);
        });
      }

      function obtenerMensajeDesdeURL() {
        const params = new URLSearchParams(window.location.search);
        return params.get('mensajeCifrado') || 'Sin mensaje';
      }

      document.addEventListener('DOMContentLoaded', () => {
        crearDiscoLetras(document.querySelector(".exterior"), ALFABETO, 150);
        crearDiscoLetras(document.querySelector(".interior"), ALFABETO, 120);

        const mensajeCifrado = decodeURIComponent(obtenerMensajeDesdeURL());
        document.getElementById('mensaje-cifrado').textContent = mensajeCifrado;

        document.getElementById("clave-slider").addEventListener("input", (e) => {
          const clave = parseInt(e.target.value, 10);
          document.getElementById("clave-valor").textContent = clave;
          const gradosPorLetra = 360 / ALFABETO.length;
          const angulo = clave * gradosPorLetra;
          document.getElementById("disco-interior").style.transform = `rotate(-${angulo}deg)`;
        });
      });
    </script>
  </body>
</html>